package com.myDVD;

import java.sql.CallableStatement;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;

import com.util.DBConnectionMgr;

import oracle.jdbc.OracleCallableStatement;
import oracle.jdbc.OracleTypes;

public class DVDDao {
	Connection con          = null;
	PreparedStatement pstmt = null;
	CallableStatement cstmt = null; // 프로시저를 호출, 요청
	ResultSet         rs    = null;
	DBConnectionMgr   dbMgr = null;
	OracleCallableStatement ocstmt = null; // 커서사용
	
	//파라미터로 끌고오자
	public List<DVDVO> getRent(String keyword, Object combobox) {
		System.out.println("Dad getRent 호출");
		List<DVDVO> list = new ArrayList<DVDVO>();
		dbMgr = DBConnectionMgr.getInstance();
		StringBuilder sql = new StringBuilder();
		if("DVD명".equals(combobox)) {
			try {
				con = dbMgr.getConnection();
				cstmt = con.prepareCall("{call proc_dvd(?)}");
				cstmt.registerOutParameter(1, OracleTypes.CURSOR);
				cstmt.execute();
				ocstmt = (OracleCallableStatement)cstmt;
				ResultSet rs =
				
			} catch (Exception e) {
				
			} finally {
				
			}
		} else if("이름".equals(combobox)) {
			
		} else if("대여날짜".equals(combobox)) {
			
		}
		sql.append("SELECT r_date,memname,mov_title,phonenum,address,returndate  ");
		sql.append("  FROM rental r, mem m, dvd d, rendetail rd                  ");
		sql.append(" WHERE m.memid = r.memid                                     ");
		sql.append("    AND rd.serialnum = d.serialnum                           ");
		sql.append("    AND r.r_num = rd.r_num                                   ");
		sql.append("    AND mov_title                                    ");
		sql.append(" ORDER BY r_date DESC                                        ");
		
		
		
		return null;
	}

}
