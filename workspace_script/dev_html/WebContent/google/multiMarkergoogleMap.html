<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>구글맵 서비스 API 활용 - marker[multiMarkergoogleMao.html]</title>
</head>

<!-- <body onLoad = initMap()> -->
<body>
    <div id="map" style="width:900px; height: 500px;"></div>
    <script type="text/javascript">
        var locs = [
            ['덕수궁', 37.565838, 126.975186]
            , ['충무로', 37.561547, 126.993918]
            , ['남산', 37.553821, 126.980945]

        ];
        //locs[0] = ['덕수궁', 37.565838, 126.975186];
        function initMap() {
            //둘둘치킨 가산디지털역의 위도와 경도 값을 배열로 선언
            var curLatLng = {
                lat: 37.480879
                , lng: 126.882433
            };
            var map = new google.maps.Map(document.getElementById("map"), {
                center: new google.maps.LatLng(37.560272, 126.980749)
                , position: curLatLng
                , map: map
                , zoom: 14
            });
            //마커 클릭 시 윈도우
            var infoWindow = new google.maps.InfoWindow();
            //마커 객체를 여러개 선언해야 하므로 for문 사용
            var marker, i;
            for(i=0;i<locs.length;i++) {//로우의 수
                marker = new google.maps.Marker({
                    id:i
                    ,position: new google.maps.LatLng(locs[i][1],locs[i][2])//위도와 경도
                    ,map:map
                });///end of marker
                /*
                이벤트 소스 : marker, 이벤트 핸들러 : click Event
                클릭이벤트의 처리 내용을 세번째 파라미터에서 익명 함수로 구현
                파라미터로 받는 marker객체는 사용자가 선택한 마커 객체이고
                두번 째 변수 i는 위치정보에 대한 로우값을 가지고 있다가 위치 정보 중 위치명을 가져옴
                익명함수이지만 반환값 처리가 가능하도록 되어 있어
                InfoWindow 객체 속성을 새로운 정보로 초기화 처리함
                이벤트가 발생된 마커객체 정보와 위치 정보를 갖는 i값을
                */
                google.maps.event.addListener(marker, 'click', (function(marker,i){
                    return function() {
                        //marker와 i의 값을 반환
                        infoWindow.setContent(locs[i][0]);
                        infoWindow.open(map,marker);
                    }
                })(marker,i));
                if(marker) {//마커 클릭시 줌 센터로 조정
                    marker.addListener('click',function(){
                        map.setZoom(16);
                        map.setCenter(this.getPosition());
                    });
                }
            }/////////end of for
        }
    </script>
    <script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDigOrPSjgbT5dH_bDWdUCCbHcj3EIASyc&callback=initMap"></script>
</body>

</html>